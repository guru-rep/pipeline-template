type: pipeline-template
version: 1
name: ContainerBuild
displayName: Container Build Pipeline
templateType: MULTIBRANCH
parameters:
  - name: repoName
    type: string
    displayName: Name of the repo to checkout from
  - name: repoOwner
    type: string
    displayName: Repo owner (this may be an org owner)
  - name: repoCreds
    type: string
    displayName: Jenkins credentials id for build (these must already exist)
    defaultValue: gururepservice-cred
  - name: imageOrg
    type: string
    displayName: Image Organisation (eg docker repo)
    defaultValue: gururepservice
  - name: imageRepo
    type: string
    displayName: Image Repo (eg docker repo)
    defaultValue: gapi
  - name: majorBuildLabel
    type: number
    displayName: Major Build Label
    defaultValue: 1.0
  - name: debugPL
    type: boolean
    displayName: Debug
    defaultValue: false
  - name: github_creds
    displayName: GitHub Credentials ID
    type: credentials
    defaultValue: gururepservice-cred
multibranch:
  branchSource:
    github:
      repoOwner: ${repoOwner}
      repository: ${repoName}
      credentialsId: ${repoCreds}
